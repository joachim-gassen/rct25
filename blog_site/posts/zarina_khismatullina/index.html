<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zarina Khisamtullina">
<meta name="dcterms.date" content="2025-07-18">
<meta name="description" content="Why we fall for partisan fakery? Pennycook &amp; Rand find laziness, not loyalty, to blame. Over 3,400 Clinton and Trump fans judged Facebook-style headlines—real, fake, blue, red — then took the three-item Cognitive Reflection Test. High-CRT readers spotted fakes and withheld shares, whichever side they favored. Viral hoaxes scream implausibility, so a two-second mental check beats them.">

<title>People Fall for Fake News Because They Fail to Think How Reflecting Beats Partisan Clickbait – Research on Corporate Transparency</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #1b8a8f;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Research on Corporate Transparency</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/joachim-gassen/rct25"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">People Fall for Fake News Because They Fail to Think How Reflecting Beats Partisan Clickbait</h1>
                  <div>
        <div class="description">
          Why we fall for partisan fakery? Pennycook &amp; Rand find laziness, not loyalty, to blame. Over 3,400 Clinton and Trump fans judged Facebook-style headlines—real, fake, blue, red — then took the three-item Cognitive Reflection Test. High-CRT readers spotted fakes and withheld shares, whichever side they favored. Viral hoaxes scream implausibility, so a two-second mental check beats them.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Zarina Khisamtullina </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 18, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="people-fall-for-fake-news-because-they-fail-to-think-how-reflecting-beats-partisan-clickbait" class="level1">
<h1>“People Fall for Fake News Because They Fail to Think” — How Reflecting Beats Partisan Clickbait</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="zarina_khismatullina_1.png" class="img-fluid figure-img"></p>
<figcaption>Picture 1. Headline Example</figcaption>
</figure>
</div>
<p>Is your first instinct after reading this headline to share—or to question? You might think “No way, that can’t be real.” But why? Is it because you support Donald Trump, or because the story simply feels far-fetched? That gut reaction tells something important about how we process news.</p>
<p>That eye-catching headline was one of the democrat-aligned fake headlines used by Pennycook and Rand. In their paper “Lazy, not biased: Susceptibility to partisan fake news is better explained by lack of reasoning than by motivated reasoning,” they argue that people fall for fake news not because they are politically biased, but because they fail to engage in analytical thinking.</p>
<section id="why-do-fake-news-stick" class="level2">
<h2 class="anchored" data-anchor-id="why-do-fake-news-stick">Why Do Fake News Stick?</h2>
<p>After the 2016 U.S. election, the top 20 fake-news stories on Facebook saw more engagement than the top 20 real ones (Silverman et al., 2016). Two big theories raced to explain why:</p>
<ul>
<li><p>Motivated reasoning suggests that when we think hard, we actually twist facts to fit our political perspective — accepting claims confirming our beliefs and dismissing inconvenient truths. For example, studies show this approach works for the topics like climate change (Kahan et al., 2012) or gun control (Kahan et al., 2017).</p></li>
<li><p>Classical dual-process theory says analytic thinking simply helps us spot nonsense, regardless of ideology. Typical examples include rejecting paranormal claims (Pennycook et al., 2012) or conspiracy theories (Swami et al., 2014).</p></li>
</ul>
<p>So, does analytical thinking help or hurt?</p>
</section>
<section id="but-first-what-is-it-to-think-analytically" class="level2">
<h2 class="anchored" data-anchor-id="but-first-what-is-it-to-think-analytically">But first, what is it to “think analytically”?</h2>
<p>Pennycook and Rand measured analytic thinking with the Cognitive Reflection Test (CRT), featuring puzzles such as:</p>
<p><em>A bat and ball cost $1.10. The bat costs $1.00 more than the ball. How much is the ball?</em> (Frederick, 2005)</p>
<p>If you reflexively answer 10 cents (which is wrong, because if the ball cost 10 cents, the bat would have to cost $1.10 and they would total $1.20), you’re relying on intuition. If you pause and reflect, you arrive at the correct 5 cents. High CRT scores signal a willingness to override gut instincts and think analytically. The same applies when judging news.</p>
</section>
<section id="testing-two-theories" class="level2">
<h2 class="anchored" data-anchor-id="testing-two-theories">Testing Two Theories</h2>
<p>To see whether “thinking harder” helps or hurts, Pennycook and Rand recruited large samples - 800 participants in the first study and 2 644 in the replication - of Clinton and Trump supporters. They showed each person a Facebook-style feed of real and fake headlines split into democrat-friendly, republican-friendly, and neutral categories. Participants first judged how accurate each headline felt and whether they would share it, and then took the short CRT.</p>
</section>
<section id="three-patterns-defined" class="level2">
<h2 class="anchored" data-anchor-id="three-patterns-defined">Three Patterns Defined</h2>
<p><strong>1. High-CRT readers were consistently better judges—no matter whose side the headline favored</strong>.</p>
<p>Whether a headline praised Clinton or Trump made no difference: high-CRT readers doubted fakes and trusted reals <em>(Fig. 1)</em>. The same reflective habit also made them less willing to pass fakes along on social media.</p>
<p><strong>2. People judged headlines that matched their politics a bit more accurately</strong></p>
<p>That feels like motivated reasoning—but they were also stricter with same-side fakes. There is simply more background knowledge about familiar topics. Simply saying, democrats spotted democrat-friendly fakes better than cross-party ones, while Trump supporters showed little or only modest advantage for their own-side fakes.</p>
<p><strong>3. Overall, Clinton supporters out-performed Trump supporters at telling real from fake.</strong></p>
<p>Interestingly, participants preferring Clinton over Trump showed generally stronger truth-discernment than Trump supporters. However, this ideological difference was significantly smaller than the difference created by varying levels of analytical reasoning.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="zarina_khismatullina_2.jpg" class="img-fluid figure-img"></p>
<figcaption>Figure 1. Mean perceived accuracy of (a) fake and (b) real news headlines as a function of political ideology (support for Hillary Clinton or Donald Trump), political valence of headline (Democrat-consistent or Republican-consistent), and Cognitive Reflection Test performance (bottom quartile = “intuitive”; top quartile = “deliberative”), based on the data of Study 2. Clinton support: N (intuitive) = 457; N (deliberative) = 577. Trump support: N (intuitive) = 422; N (deliberative) = 386. Error bars represent 95% CIs.</figcaption>
</figure>
</div>
</section>
<section id="are-fakes-obviously-fake" class="level2">
<h2 class="anchored" data-anchor-id="are-fakes-obviously-fake">Are Fakes Obviously “Fake”?</h2>
<p>A previous study by Pennycook et al.&nbsp;(2018) confirmed that viral fake news are usually largely implausible. To check if plausibility is actually a stimulus for analytic thinkers, in Study 3 authors ranked headlines from “sounds crazy” to “sounds reasonable”. In short, the wilder the headline, the more reflection helps, regardless of political flavor —just what the classical reasoning account predicts.</p>
<p>Try it yourself:</p>
<p><em>“Because Of The Lack Of Men, Iceland Gives $5 000 Per Month To Immigrants Who Marry Icelandic Women!”</em> vs.&nbsp;<em>“Yellowstone Evacuated: Experts Claim ‘Super Volcano’ Could Erupt Within Weeks”.</em></p>
<p>Which one seems more believable? Both are false, but I would assume readers may laugh at the first and pause at the second—and that pause is exactly what the CRT picks up. The paper gives average plausibility scores but does not publish a full “craziest-to-most-believable” ranking, so this Iceland-versus-Yellowstone contrast is illustrative rather than official.</p>
<p>The results of analyses match the classical model - reflection filters out nonsense, it doesn’t reinforce bias. But why didn’t motivated reasoning show up here? Previous work showing that reflection deepens political divides often focused on complex topics—e.g., climate science or gun statistics (Kahan et al., 2012; Kahan et al., 2017) —where even the most motivated reader sometimes lacks the background to evaluate claims. Fake-news headlines, by contrast, are typically loud and implausible by design. And if we bother to think, we can actually realize something is off (“Why would Iceland pay immigrants to marry women?”).</p>
</section>
<section id="implications" class="level2">
<h2 class="anchored" data-anchor-id="implications">Implications</h2>
<p>Pennycook and Rand’s work suggests that nurturing critical thinking may be a good defense against misinformation. Some practical implementations following from the paper may be as follows:</p>
<ul>
<li><p>Think-twice prompts. A quick “Are you sure?” before the Share button can trigger reflection.</p></li>
<li><p>Micro-training. Five-minute CRT-style quizzes teach the pause habit.</p></li>
<li><p>Plausibility flags. Down-ranking headlines that scream “too good to be true” gives users room to think.</p></li>
</ul>
</section>
<section id="future-work" class="level2">
<h2 class="anchored" data-anchor-id="future-work">Future Work</h2>
<ul>
<li><p>Frame the question differently. Swap “Is this accurate?” for “Do you believe this?”—the authors expect political bias might re-appear.</p></li>
<li><p>Add identity cues (“Friends shared this”) or a quick warning (“Some stories are false”)—do they blunt or boost reflection?</p></li>
<li><p>Test outside the lab. Running the study in live social-media feeds or in other political systems will show if the “lazy, not biased” pattern remains.</p></li>
</ul>
</section>
<section id="takeaway" class="level2">
<h2 class="anchored" data-anchor-id="takeaway">Takeaway</h2>
<p>When it comes to eye-popping political headlines, the problem isn’t people’s partisan identity—it’s the mental autopilot that lets a sensational claim sail past unexamined. Lazy, not biased. So, when we pause to think, political color of a headline matters far less than plausibility—and most fakes crumble.</p>
</section>
<section id="reference-list" class="level2">
<h2 class="anchored" data-anchor-id="reference-list">Reference list</h2>
<p><a href="http://dx.doi.org/10.1257/089533005775196732">Frederick, S. (2005). Cognitive reflection and decision making. Journal of Economic Perspectives, 19(4), 25–42.</a></p>
<p><a href="https://doi.org/10.1038/nclimate1547">Kahan, D. M., Peters, E., Wittlin, M., Slovic, P., Ouellette, L. L., Braman, D., &amp; Mandel, G. (2012). The polarizing impact of science literacy and numeracy on perceived climate change risks. Nature Climate Change, 2(10), 732–735.</a></p>
<p><a href="https://doi.org/10.1017/bpp.2016.2">Kahan, D., Peters, E., Dawson, E., &amp; Slovic, P. (2017). Motivated numeracy and enlightened self-government. Behavioural Public Policy, 1(1), 54–86.</a></p>
<p><a href="https://doi.org/10.1016/j.cognition.2018.06.011">Pennycook, G., David G. Rand (2029). Lazy, not biased: Susceptibility to partisan fake news is better explained by lack of reasoning than by motivated reasoning, Cognition, 188, 39-50.</a></p>
<p><a href="http://dx.doi.org/10.2139/ssrn.2958246">Pennycook, G., Cannon, T. D., &amp; Rand, D. G. (2018). Prior exposure increases perceived accuracy of fake news. Journal of Experimental Psychology: General, 147(12), 1865-1880.</a></p>
<p><a href="http://dx.doi.org/10.1016/j.cognition.2012.03.003">Pennycook, G., Cheyne, J. A. J. A., Seli, P., Koehler, D. J. D. J., &amp; Fugelsang, J. A. J. A. (2012). Analytic cognitive style predicts religious and paranormal belief. Cognition, 123(3), 335–346.</a></p>
<p><a href="https://www.buzzfeed.com/craigsilverman/partisan-fb-pages-analysis">Silverman, C., Strapagiel, L., Shaban, H., &amp; Hall, E. (2016). Hyperpartisan Facebook pages are publishing false and misleading information at an alarming rate.</a></p>
<p><a href="http://dx.doi.org/10.1016/j.cognition.2014.08.006">Swami, V., Voracek, M., Stieger, S., Tran, U. S., &amp; Furnham, A. (2014). Analytic thinking reduces belief in conspiracy theories. Cognition, 133(3), 572–585.</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Supported by <a href="https://accounting-for-transparency.de">TRR 266 Accounting for Transparency</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>